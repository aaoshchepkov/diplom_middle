(()=>{"use strict";document.addEventListener("click",(e=>{let t=e.target;(()=>{let e=document.querySelector(".clubs-list > ul");e.style.zIndex=1200;let s=document.querySelector(".clubs-list > p");t===s&&"block"===e.style.display?e.style.display="none":t===s&&(e.style.display="block"),t.closest(".club-select")||(e.style.display="none")})();let s=document.querySelector("#free_visit_form"),l=document.querySelector("#callback_form"),o=document.querySelector("#gift"),i=document.querySelectorAll(".close_icon"),n=document.querySelectorAll(".overlay"),r=document.querySelector(".fixed-gift"),d=document.querySelector(".menu-button > img"),c=document.querySelector(".popup-menu"),a=document.querySelector(".close-menu-btn > img"),p=document.querySelector("#thanks");t.closest(".open-popup")&&(s.style.display="block"),t.closest("#callback_form-btn")&&(l.style.display="block"),t.closest(".fixed-gift")&&(o.style.display="block",r.style.display="none"),t===d&&(c.style.display="block"),(t.closest(".scroll > a")||t===a)&&(c.style.display="none"),t.closest(".close-btn")&&(o.style.display="none",p.style.display="none"),i.forEach((e=>{t===e&&(s.style.display="none",l.style.display="none",o.style.display="none",p.style.display="none")})),n.forEach((e=>{t===e&&(s.style.display="none",l.style.display="none",o.style.display="none",p.style.display="none")}))})),(()=>{let e=document.querySelector(".top-menu"),t=document.querySelector(".head"),s=document.querySelector(".head-slider"),l=document.querySelector("#totop");l.style.display="none",document.addEventListener("scroll",(()=>{screen.width<768?e.getBoundingClientRect().top<0?e.style.position="fixed":t.getBoundingClientRect().top>=-t.clientHeight&&(e.style.position=""):e.style.position="",s.getBoundingClientRect().top<-s.clientHeight?l.style.display="block":l.style.display="none"}))})(),(()=>{const e=document.querySelectorAll(".main-slider > .slide"),t=document.querySelector(".main-slider");let s,l=0;const o=()=>{e[l].style.display="none",l++,l>=e.length&&(l=0),e[l].style.display="flex"},i=(e=3e3)=>{s=setInterval(o,e)};t.addEventListener("mouseover",(e=>{e.target.closest(".slide")&&clearInterval(s)})),t.addEventListener("mouseout",(e=>{e.target.closest(".slide")&&i()})),i(3e3)})(),(()=>{(()=>{const e=document.querySelectorAll(".gallery-slider > .slide"),t=document.querySelector(".gallery-slider");let s,l,o,i,n,r,d;t.style.position="relative",i=document.createElement("span"),i.classList.add("slider-arrow"),i.classList.add("slider-arrow-prev"),t.appendChild(i),d=document.createElement("span"),i.style.cssText="left : 20px;",d.style.cssText="background-image: url(./images/arrow-left.png); background-repeat: no-repeat;\n      background-position: center;",i.appendChild(d),n=document.createElement("span"),n.classList.add("slider-arrow"),n.classList.add("slider-arrow-next"),t.prepend(n),r=document.createElement("span"),n.style.cssText="right : 20px;",r.style.cssText="background-image: url(./images/arrow-right.png); background-repeat: no-repeat;\n      background-position: center;",n.appendChild(r),l=document.createElement("ul"),l.classList.add("slider-dots"),t.appendChild(l),e.forEach(((t,i)=>{s=document.createElement("li"),o=document.createElement("button"),s.classList.add("slider-dot"),o.classList.add("dot"),0===i&&s.classList.add("slick-active"),i<e.length&&(l.appendChild(s),s.appendChild(o))}))})();const e=document.querySelectorAll(".gallery-slider > .slide"),t=document.querySelector(".gallery-slider"),s=document.querySelectorAll(".slider-dots > li"),l=document.querySelectorAll(".dot"),o=document.querySelector(".slider-arrow-next > span"),i=document.querySelector(".slider-arrow-prev > span");let n,r=0;e.forEach(((t,s)=>{e[s].style.display="none",e[0].style.display="block"}));const d=()=>{e[r].style.display="none",s[r].classList.remove("slick-active"),r++,r>=e.length&&(r=0),e[r].style.display="block",s[r].classList.add("slick-active")},c=(e=3e3)=>{n=setInterval(d,e)};t.addEventListener("click",(t=>{t.preventDefault();let n=t.target;(n.matches(".dot")||n===o||n===i)&&(e[r].style.display="none",s[r].classList.remove("slick-active"),n===o?r++:n===i?r--:n.matches(".dot")&&l.forEach(((e,t)=>{n===e&&(r=t)})),r>=e.length&&(r=0),r<0&&(r=e.length-1),e[r].style.display="block",s[r].classList.add("slick-active"))})),t.addEventListener("mouseover",(e=>{let t=e.target;(t.closest(".slide")||t.closest(".slider-arrow")||t.closest(".slider-arrow"))&&clearInterval(n)})),t.addEventListener("mouseout",(e=>{let t=e.target;(t.closest(".slide")||t.closest(".slider-arrow")||t.closest(".slider-arrow"))&&c()})),c(3e3)})(),(()=>{const e=["1999","9900","13900","19900"],t=["2999","14990","21990","24990"];let s=document.querySelectorAll(".time > input"),l=document.querySelector("#price-total");const o=document.querySelector("#card_order"),i=document.querySelector("#card_leto_mozaika"),n=document.querySelector(".price-message > input");let r;l&&o.addEventListener("input",(()=>{!0===i.checked?s.forEach(((t,s)=>{t.checked&&(r=e[s])})):!1===i.checked&&s.forEach(((e,s)=>{e.checked&&(r=t[s])})),"ТЕЛО2019"===n.value&&(r=Math.floor(r/100*70)),l.textContent=r}))})(),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div");let s=document.querySelector(".popup");t.style.cssText="font-size: 2rem; color: white;",e.forEach((e=>{e.addEventListener("submit",(o=>{o.preventDefault(),e.appendChild(t),t.textContent="Загрузка...";const i=new FormData(e);let n={};i.forEach(((e,t)=>{n[t]=e})),l(n).then((l=>{if(200!==l.status)throw new Error("status network not 200.");t.textContent="Спасибо за обращение! Мы скоро с вами свяжемся",e.querySelectorAll("input").forEach((e=>{e.value=""})),setTimeout((()=>{s.style.display="none"}),2e3),setTimeout((()=>{t.remove()}),5e3)})).catch((e=>{t.textContent="Что то пошло не так...",console.error(e)}))}))}));let l=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/JSON"},body:JSON.stringify(e)})})(),function(e,t="+7 (___) ___-__-__"){const s=document.querySelectorAll(e);function l(e){const s=e.keyCode,l=t,o=l.replace(/\D/g,""),i=this.value.replace(/\D/g,"");let n=0,r=l.replace(/[_\d]/g,(function(e){return n<i.length?i.charAt(n++)||o.charAt(n):e}));n=r.indexOf("_"),-1!==n&&(r=r.slice(0,n));let d=l.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");d=new RegExp("^"+d+"$"),(!d.test(this.value)||this.value.length<8||s>47&&s<58)&&(this.value=r)}for(const e of s)e.addEventListener("input",l),e.addEventListener("focus",l),e.addEventListener("blur",l)}('[placeholder="Ваш номер телефона..."]',"+7-___-___-__-__"),document.addEventListener("input",(e=>{e.preventDefault();let t=document.querySelectorAll('[placeholder="Ваше имя..."]'),s=document.querySelectorAll('[placeholder="Ваш номер телефона..."]'),l=e.target;const o=()=>{l.value=l.value.replace(/ +/g," "),l.value=l.value.replace(/-+/g,"-"),l.value=l.value.replace(/^-|-$/g,""),l.value=l.value.trim()};t.forEach((e=>{l===e&&(l.value=l.value.replace(/[^а-яё\ ]/gi,""),e.addEventListener("blur",(()=>{o(),l.value.length<2?(l.placeholder="Имя должно быть не короче 2 букв",setTimeout((function(){l.placeholder="Ваше имя..."}),3e3),l.value=""):l.value=l.value.split(" ").map((e=>e[0].toUpperCase()+e.substring(1))).join(" ")}),!0))})),s.forEach((e=>{l===e&&(l.value=l.value.replace(/[^0-9\+-]/gi,""),e.addEventListener("blur",(()=>{o(),l.value.length<16&&(e.placeholder="Введите в формате +7-999-999-99-99",setTimeout((function(){e.placeholder="Ваш номер телефона..."}),3e3),e.value="")}),!0))}))})),(()=>{if(document.querySelector(".services-slider-wrapper")){class e{constructor({main:e,wrap:t,next:s,prev:l,position:o=0,slidesToShow:i=5,responsive:n=[]}){this.main=document.querySelector(e),this.wrap=document.querySelector(t),this.next=document.querySelector(s),this.prev=document.querySelector(l),this.slidesToShow=i,this.slides=document.querySelector(t).children,this.options={position:o,widthSlide:Math.floor(100/this.slidesToShow),maxPosition:this.slides.length-this.slidesToShow},this.responsive=n}init(){this.addClass(),this.addStyle(),this.controlSlider(),this.responseInit()}addClass(){this.main.classList.add("glo-slider"),this.wrap.classList.add("glo-slider__wrap");for(const e of this.slides)e.classList.add("glo-slider__item")}addStyle(){let e=document.getElementById("sliderCarousel-style");e||(e=document.createElement("style"),e.id="sliderCarousel-style"),e.textContent=`    \n      .glo-slider__item {\n        flex: 0 0 ${this.options.widthSlide}%;\n      }\n    `,document.head.appendChild(e)}controlSlider(){this.prev.addEventListener("click",this.prevSlider.bind(this)),this.next.addEventListener("click",this.nextSlider.bind(this))}prevSlider(){(this.options.infinity||this.options.position>0)&&(--this.options.position,this.next.style.display="block",0===this.options.position&&(this.prev.style.display="none"),this.wrap.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}nextSlider(){(this.options.infinity||this.options.position<this.options.maxPosition)&&(++this.options.position,this.prev.style.display="block",this.options.position===this.options.maxPosition&&(this.next.style.display="none"),this.wrap.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}responseInit(){const e=this.slidesToShow,t=this.responsive.map((e=>e.breakpoint)),s=Math.max(...t),l=()=>{const l=document.documentElement.clientWidth;if(l<s)for(let e=0;e<t.length;e++)l<t[e]&&(this.slidesToShow=this.responsive[e].slidesToShow,this.options.widthSlide=Math.floor(100/this.slidesToShow),this.addStyle());else this.slidesToShow=e,this.options.widthSlide=Math.floor(100/this.slidesToShow),this.addStyle()};l(),window.addEventListener("resize",l)}}new e({main:".services-slider-wrapper",wrap:".services-slider",prev:".services-slider__prev",next:".services-slider__next",slidesToShow:5,responsive:[{breakpoint:1200,slidesToShow:4},{breakpoint:1024,slidesToShow:3},{breakpoint:768,slidesToShow:2},{breakpoint:576,slidesToShow:1}]}).init()}})()})();